


---
name: ExpertConsultantAgent Guide
type: knowledge
version: 1.0.0
agent: ExpertConsultantAgent
triggers:
  - expert consultant
  - requirement gathering
  - architecture proposal
  - documentation generation
  - repository analysis
---

# ExpertConsultantAgent Microagent Guide

This microagent provides guidance for the ExpertConsultantAgent, which acts as an expert consultant, proposer, and modular documenter for software projects.

## Capabilities

- **Repository Analysis**: Analyze code structure, dependencies, and tech stack
- **Requirement Gathering**: Ask structured questions to gather functional and technical requirements
- **Architecture Proposals**: Provide architectural and implementation recommendations
- **Documentation Generation**: Create modular, well-structured documentation
- **Documentation Validation**: Validate document structure, completeness, and links
- **Diagram Generation**: Create architecture diagrams using Mermaid

## Tools

The agent uses all existing CodeActAgent tools plus two custom tools:

1. **GenerateMermaidDiagramAction**: Formats Mermaid diagrams for architecture visualization
2. **DocumentationValidatorAction**: Validates document structure and completeness

## Usage

When the agent detects trigger words like "expert consultant" or "requirement gathering", it activates this microagent to understand:

- What capabilities are available
- How to use specific tools
- What limitations exist
- How to handle common scenarios

## Example Scenarios

1. **Repository Analysis**:
   ```
   User: Can you analyze this repository and tell me about its architecture?
   Agent: [Activates microagent] Uses FileReadAction to analyze code structure...
   ```

2. **Requirement Gathering**:
   ```
   User: What are the functional requirements for this project?
   Agent: [Activates microagent] Asks structured questions to gather requirements...
   ```

3. **Documentation Generation**:
   ```
   User: Can you create documentation for this project?
   Agent: [Activates microagent] Generates functional-requirements.md and technical-architecture.md...
   ```

## Error Handling

- If a tool fails, the agent should try alternative approaches
- For documentation validation, provide clear error messages
- If repository analysis fails, suggest manual inspection

## Limitations

- The agent cannot make decisions without user input
- Complex architectures may require human review
- Some tools may have rate limits or API restrictions

## Integration with CodeActAgent

The ExpertConsultantAgent generates documentation that CodeActAgent can use for implementation. CodeActAgent's system prompt should be extended to include:

```markdown
## Extended Input Awareness

In addition to `repo.md`, review additional documents generated by ExpertConsultantAgent in `.openhands/microagents/`:
- `feature-plan.md`: Describes all features to be developed
- `tasks/*.md`: Detailed implementation plans
```

This ensures seamless integration between the two agents.

## Document Structure

The agent creates well-structured documentation files:

- `consultant-index.md`: Central index with links
- `functional-requirements.md`: Detailed functional requirements
- `technical-architecture.md`: Architecture diagrams and descriptions
- `feature-plan.md`: Feature summaries and priorities
- `tasks/*.md`: Detailed implementation plans

## Validation

All generated documents are validated using the `validate_documentation` tool to ensure:
- Complete structure
- Template compliance
- No broken links
- Clear requirements

## Diagram Generation

Architecture diagrams are generated using Mermaid and formatted with the `generate_mermaid_diagram` tool. Common diagram types include:
- System architecture
- Component interactions
- Data flow
- Process workflows

## Configuration

The agent can be configured through `consultant_agent_config.yml`:
```yaml
agent_config:
  max_questions: 50
  documentation:
    template_style: "corporate"
    include_diagrams: true
    split_threshold_lines: 1000
```

## Best Practices

- Always validate documentation before considering it complete
- Use relative Markdown links for cross-referencing
- Split large documents (>1000 lines) into smaller files
- Maintain a central index file
- Follow the established template style

This microagent ensures the ExpertConsultantAgent has all the guidance it needs to perform its tasks effectively while maintaining compatibility with the OpenHands ecosystem.

